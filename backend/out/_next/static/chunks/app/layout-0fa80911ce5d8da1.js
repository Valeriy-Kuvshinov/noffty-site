(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{2564:function(e,a,t){Promise.resolve().then(t.t.bind(t,240,23)),Promise.resolve().then(t.bind(t,5363)),Promise.resolve().then(t.bind(t,5628)),Promise.resolve().then(t.bind(t,2714)),Promise.resolve().then(t.bind(t,9121)),Promise.resolve().then(t.bind(t,4668)),Promise.resolve().then(t.bind(t,3810)),Promise.resolve().then(t.bind(t,159))},5363:function(e,a,t){"use strict";t.d(a,{Footer:function(){return l}});var n=t(7437),s=t(7138),r=t(6463),i=t(9714),o=t(4148);function c(e){let{iconName:a,link:t,ariaLabel:s}=e;return(0,n.jsxs)("a",{href:t,target:"_blank",rel:"noopener noreferrer","aria-label":s,children:[(0,n.jsx)(o.M,{iconName:"rhombus"}),(0,n.jsx)(o.M,{iconName:a})]})}function l(){let e=(0,r.usePathname)(),a=i.N.getSocialLinks();return(0,n.jsx)("footer",{className:"full",children:(0,n.jsxs)("section",{className:"footer-contents w-h-100 grid layout-row",children:[(0,n.jsxs)("div",{className:"links grid",children:[(0,n.jsx)("h2",{children:"Navigation"}),(0,n.jsx)(s.default,{href:"/games",className:"".concat("/games/"===e?"active":""," w-fit"),title:"Go to games index?","aria-label":"Navigate to games page",children:(0,n.jsx)("span",{children:"Games"})}),(0,n.jsx)(s.default,{href:"/about",className:"".concat("/about/"===e?"active":""," w-fit"),title:"Go to about page?","aria-label":"Navigate to about page",children:(0,n.jsx)("span",{children:"About"})}),(0,n.jsx)(s.default,{href:"/contact",className:"".concat("/contact/"===e?"active":""," w-fit"),title:"Go to contact page?","aria-label":"Navigate to contact page",children:(0,n.jsx)("span",{children:"Contact"})}),(0,n.jsx)(s.default,{href:"/privacy",className:"".concat("/privacy/"===e?"active":""," w-fit"),title:"Go to privacy policy page?","aria-label":"Navigate to privacy policy page",children:(0,n.jsx)("span",{children:"Privacy"})})]}),(0,n.jsxs)("div",{className:"outside-links flex column",children:[(0,n.jsx)("h2",{children:"Follow Us"}),(0,n.jsx)("div",{className:"noffty-links flex row justify-between",children:a.map(e=>(0,n.jsx)(c,{iconName:e.iconName,link:e.link,ariaLabel:e.ariaLabel},e.iconName))})]}),(0,n.jsx)("span",{className:"copyright",children:"\xa9 2024 Noffty Productions. All Rights Reserved."})]})})}},2714:function(e,a,t){"use strict";t.d(a,{Header:function(){return p}});var n=t(7437),s=t(7138),r=t(2265),i=t(6463),o=t(3671),c=t(9794),l=t(1551),d=t(6390),u=t(4148),m=t(6370),g=t(3999),h=t(4769),f=t(3810);function x(e){let{sessionUser:a}=e,t=(0,i.useRouter)(),{activeModal:o,closeModal:c,openModal:u}=(0,l.d)(),{setSessionUser:m}=(0,d.O)(),x=(0,r.useRef)(null),p="header-dropdown"===o;function j(){c("header-dropdown")}async function v(){try{await g.W.logout(),m(null),j(),t.push("/")}catch(e){(0,f.o)("Logout Failed!","This is awkward..."),console.error("Logout failed:",e)}}return((0,h.O)(x,j),p)?(0,n.jsx)("dialog",{className:"header-dropdown",open:p,children:(0,n.jsx)("nav",{className:"flex column align-center w-100",ref:x,children:a._id?(0,n.jsxs)(n.Fragment,{children:[a.isAdmin&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.default,{href:"/admin/games",className:"flex full-center w-100",onClick:j,children:(0,n.jsx)("span",{className:"text-center",children:"Manage Games"})}),(0,n.jsx)(s.default,{href:"/admin/edit",className:"flex full-center w-100",onClick:j,children:(0,n.jsx)("span",{className:"text-center",children:"Create Game"})})]}),(0,n.jsx)("button",{className:"flex full-center w-100",onClick:v,children:(0,n.jsx)("span",{className:"text-center",children:"Logout"})})]}):(0,n.jsx)("button",{className:"flex full-center w-100",onClick:function(){j(),u("login")},children:(0,n.jsx)("span",{className:"text-center",children:"Login"})})})}):null}function p(){let e=(0,i.usePathname)(),[a,t]=(0,r.useState)(""),{updateSearchParams:g}=(0,o.H)(),h=(0,c.h)(),{openModal:f}=(0,l.d)(),{sessionUser:p}=(0,d.O)(),j="https://res.cloudinary.com/djzid7ags/image/upload/v1719919435/ydjn6p0djqwbkko4zqts.png",v=e.startsWith("/games")||e.startsWith("/admin");function w(e){t(e.target.value)}function N(e){e.preventDefault(),g({title:a},"/games"),t("")}return(0,n.jsx)("header",{className:"full",children:(0,n.jsx)("section",{className:"header-contents w-h-100 layout-row",children:"mobile"===h||"mini-tablet"===h?(0,n.jsxs)("nav",{className:"mobile-view grid align-center justify-between",children:[(0,n.jsx)("button",{onClick:()=>f("aside-menu"),"aria-label":"Open mobile navigation & user menu",children:(0,n.jsx)(u.M,{iconName:"menu"})}),(0,n.jsx)(s.default,{href:"/",className:"logo ".concat("/"===e?"active":""),title:"Go to home?","aria-label":"Navigate to home page",children:(0,n.jsx)(m.ImageContainer,{src:j,alt:"noffty logo"})}),!v&&(0,n.jsxs)("form",{onSubmit:N,className:"w-100 layout-row fast-trans",children:[(0,n.jsx)("input",{type:"text",placeholder:"Find your next game, broski...",maxLength:40,value:a,onChange:w}),(0,n.jsx)(u.M,{iconName:"search"})]}),(0,n.jsx)("div",{className:"user flex w-fit",children:(0,n.jsx)(m.ImageContainer,{src:p.imgUrls[0],alt:"".concat(p.email," avatar")})})]}):(0,n.jsxs)("nav",{className:"desktop-view flex row align-center justify-between layout-row",children:[(0,n.jsx)(s.default,{href:"/",className:"logo ".concat("/"===e?"active":""),title:"Go to home?","aria-label":"Navigate to home page",children:(0,n.jsx)(m.ImageContainer,{src:j,alt:"noffty logo"})}),(0,n.jsx)(s.default,{href:"/games",className:"".concat("/games/"===e?"active":""),title:"Go to games index?","aria-label":"Navigate to games page",children:(0,n.jsx)("span",{children:"Games"})}),(0,n.jsx)(s.default,{href:"/about",className:"".concat("/about/"===e?"active":""),title:"Go to about page?","aria-label":"Navigate to about page",children:(0,n.jsx)("span",{children:"About"})}),(0,n.jsx)(s.default,{href:"/contact",className:"".concat("/contact/"===e?"active":""),title:"Go to contact page?","aria-label":"Navigate to contact page",children:(0,n.jsx)("span",{children:"Contact"})}),(0,n.jsxs)("section",{className:"user-form-zone flex row align-center",children:[!v&&(0,n.jsxs)("form",{onSubmit:N,className:"w-100 fast-trans",children:[(0,n.jsx)("input",{type:"text",placeholder:"Search games...",maxLength:40,value:a,onChange:w}),(0,n.jsx)(u.M,{iconName:"search"})]}),(0,n.jsx)("div",{className:"user flex w-fit",onClick:()=>f("header-dropdown"),children:(0,n.jsx)(m.ImageContainer,{src:p.imgUrls[0],alt:"".concat(p.email," avatar")})})]}),(0,n.jsx)(x,{sessionUser:p})]})})})}},5628:function(e,a,t){"use strict";t.d(a,{LoginForm:function(){return x}});var n=t(7437),s=t(1907),r=t(2265),i=t(3999),o=t(4769),c=t(5682),l=t(1551),d=t(4021),u=t(6390),m=t(5456),g=t(4148),h=t(1101),f=t(3810);function x(){let{activeModal:e,closeModal:a}=(0,l.d)(),{recaptchaSiteKey:t}=(0,d.n)(),{setSessionUser:x}=(0,u.O)(),[p,j]=(0,r.useState)(!1),v=(0,r.useRef)(null),w=(0,r.useRef)(null),N="login"===e,{values:b,errors:y,validateField:k,handleChange:C,handleSubmit:S,resetForm:L}=(0,c.c)({loginId:"",password:""},{loginId:{required:!0,email:!0,minLength:5},password:{required:!0,minLength:6}},async e=>{try{var a;let t=await (null===(a=w.current)||void 0===a?void 0:a.executeAsync());if(!t)throw Error("reCAPTCHA verification failed");let n={loginId:e.loginId,password:e.password,recaptchaToken:t},s=await i.W.login(n);x(s),(0,f.C)("Login Successful!","Welcome home broski."),I()}catch(e){(0,f.o)("Login Failed!",e.message),console.error("Login failed",e),I()}}),P=b.loginId&&b.password,E=Object.values(y).some(e=>e);function I(){L(),a("login")}return((0,o.O)(v,I),N)?(0,n.jsxs)("dialog",{className:"modal-wrapper flex align-center w-h-100",open:!0,children:[(0,n.jsx)("article",{className:"login-form flex column w-100 fast-trans",ref:v,children:(0,n.jsxs)("form",{className:"grid",onSubmit:S,children:[(0,n.jsx)(h.o,{label:"Email*",type:"email",name:"loginId",svg:"mail",maxLength:50,value:b.loginId,onChange:C,placeholder:"Your email",error:y.loginId,onBlur:()=>k("loginId",b.loginId)}),(0,n.jsxs)("div",{className:"input-area grid ".concat(y.password?"error":""," h-fit"),children:[(0,n.jsxs)("label",{className:"grid align-center",htmlFor:"password",children:[(0,n.jsx)(g.M,{iconName:"lock"}),(0,n.jsx)("span",{children:"Password*"}),y.password&&(0,n.jsx)("p",{className:"text-hide-overflow",title:y.password,children:y.password})]}),(0,n.jsx)("input",{type:p?"text":"password",id:"password",name:"password",maxLength:24,value:b.password,onChange:C,placeholder:"Your password",onBlur:()=>k("password",b.password)}),(0,n.jsx)("button",{type:"button",onClick:function(){j(!p)},children:(0,n.jsx)(g.M,{iconName:p?"eye":"noEye"})})]}),(0,n.jsxs)("section",{className:"form-actions flex row align-center justify-between",children:[(0,n.jsx)("button",{className:"flex row align-center ".concat(!P||E?"disabled":""),type:"submit",disabled:!P||E,children:(0,n.jsx)("span",{children:"Login"})}),(0,n.jsx)(m.d,{})]})]})}),t&&(0,n.jsx)(s.Z,{sitekey:t,size:"invisible",ref:w},e)]}):null}},5456:function(e,a,t){"use strict";t.d(a,{d:function(){return r}});var n=t(7437),s=t(6370);function r(){return(0,n.jsxs)("div",{className:"recaptcha-branding grid align-center",children:[(0,n.jsx)(s.ImageContainer,{src:"https://res.cloudinary.com/djzid7ags/image/upload/v1718535143/hmxw916ycqxrrsgsatsu.avif",alt:"recaptcha logo"}),(0,n.jsx)("span",{children:"Protected by reCAPTCHA"}),(0,n.jsxs)("div",{className:"links flex row justify-between",children:[(0,n.jsx)("a",{href:"https://policies.google.com/privacy",children:"Privacy"}),(0,n.jsx)("a",{href:"https://policies.google.com/terms",children:"Terms"})]})]})}},9121:function(e,a,t){"use strict";t.d(a,{AsideMenu:function(){return g}});var n=t(7437),s=t(2265),r=t(7138),i=t(6463),o=t(3999),c=t(4769),l=t(1551),d=t(6390),u=t(4148),m=t(3810);function g(){var e;let a=(0,i.useRouter)(),t=(0,i.usePathname)(),{sessionUser:g,setSessionUser:h}=(0,d.O)(),{activeModal:f,closeModal:x,openModal:p}=(0,l.d)(),[j,v]=(0,s.useState)(!1),w=(0,s.useRef)(null),N="aside-menu"===f;function b(){v(!1),setTimeout(()=>x("aside-menu"),300)}async function y(){try{await o.W.logout(),h(null),b(),a.push("/")}catch(e){(0,m.o)("Logout Failed!","This is awkward..."),console.error("Logout failed:",e)}}return((0,s.useEffect)(()=>{N?setTimeout(()=>v(!0),50):v(!1)},[N]),(0,c.O)(w,b),N)?(0,n.jsx)("dialog",{className:"modal-wrapper w-h-100",open:N,children:(0,n.jsxs)("aside",{className:"flex column w-h-100 fast-trans ".concat(j?"show":""),ref:w,children:[(0,n.jsx)("div",{className:"menu-header flex row align-center",children:(0,n.jsx)("span",{children:g._id?"Welcome @".concat(null===(e=g.email)||void 0===e?void 0:e.split("@")[0],"!"):"Hello Guest!"})}),(0,n.jsxs)("nav",{className:"flex column",children:[(0,n.jsxs)(r.default,{href:"/",className:"flex row align-center ".concat("/"===t?"active":""),onClick:b,title:"Go to home page?","aria-label":"Navigate to home page",children:[(0,n.jsx)(u.M,{iconName:"home"}),(0,n.jsx)("span",{children:"Home"})]}),(0,n.jsxs)(r.default,{href:"/games",className:"flex row align-center ".concat("/games/"===t?"active":""),onClick:b,title:"Go to games page?","aria-label":"Navigate to games page",children:[(0,n.jsx)(u.M,{iconName:"controller"}),(0,n.jsx)("span",{children:"Games"})]}),(0,n.jsxs)(r.default,{href:"/about",className:"flex row align-center ".concat("/about/"===t?"active":""),onClick:b,title:"Go to about page?","aria-label":"Navigate to about page",children:[(0,n.jsx)(u.M,{iconName:"info"}),(0,n.jsx)("span",{children:"About"})]}),(0,n.jsxs)(r.default,{href:"/contact",className:"flex row align-center ".concat("/contact/"===t?"active":""),onClick:b,title:"Go to contact page?","aria-label":"Navigate to contact page",children:[(0,n.jsx)(u.M,{iconName:"mail"}),(0,n.jsx)("span",{children:"Contact"})]}),g._id?(0,n.jsxs)(n.Fragment,{children:[g.isAdmin&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r.default,{href:"/admin/games",className:"flex row align-center ".concat("/admin/games/"===t?"active":""),onClick:b,title:"Go to games admin page?","aria-label":"Navigate to games management",children:[(0,n.jsx)(u.M,{iconName:"edit"}),(0,n.jsx)("span",{children:"Manage Games"})]}),(0,n.jsxs)(r.default,{href:"/admin/edit",className:"flex row align-center ".concat("/admin/edit/"===t?"active":""),onClick:b,title:"Create new game?","aria-label":"Navigate to game creation page",children:[(0,n.jsx)(u.M,{iconName:"plus"}),(0,n.jsx)("span",{children:"Create Game"})]})]}),(0,n.jsxs)("button",{className:"flex row align-center",onClick:y,children:[(0,n.jsx)(u.M,{iconName:"person"}),(0,n.jsx)("span",{children:"Logout"})]})]}):(0,n.jsxs)("button",{className:"flex row align-center",onClick:function(){p("login")},children:[(0,n.jsx)(u.M,{iconName:"person"}),(0,n.jsx)("span",{children:"Login"})]})]})]})}):null}},4668:function(e,a,t){"use strict";t.d(a,{ImageModal:function(){return l}});var n=t(7437),s=t(2265),r=t(4769),i=t(1551),o=t(6370),c=t(4148);function l(){let{activeModal:e,closeModal:a,modalValue:t}=(0,i.d)(),l=(0,s.useRef)(null),d="image-modal"===e;function u(){a("image-modal")}return((0,r.O)(l,u),d)?(0,n.jsx)("dialog",{className:"modal-wrapper flex full-center w-h-100",open:d,children:(0,n.jsxs)("div",{className:"image-modal flex column w-h-fit",ref:l,children:[t&&(0,n.jsx)(o.ImageContainer,{src:t,alt:"Modal Image"}),(0,n.jsx)("button",{className:"flex",onClick:()=>u(),children:(0,n.jsx)(c.M,{iconName:"return"})})]})}):null}},9794:function(e,a,t){"use strict";t.d(a,{Q:function(){return i},h:function(){return o}});var n=t(7437),s=t(2265);let r=(0,s.createContext)("desktop");function i(e){let{children:a}=e,t=(0,s.useCallback)(()=>{let e=window.innerWidth;return e<=480?"mobile":e<=600?"mini-tablet":e<=900?"tablet":"desktop"},[]),[i,o]=(0,s.useState)(t);return(0,s.useEffect)(()=>{let e=()=>o(t());return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[t]),(0,n.jsx)(r.Provider,{value:i,children:a})}function o(){let e=(0,s.useContext)(r);if(void 0===e)throw Error("useDeviceType must be used within a DeviceTypeProvider");return e}},159:function(e,a,t){"use strict";t.d(a,{Providers:function(){return u}});var n=t(7437),s=t(2265),r=t(1635),i=t(4021),o=t(9794),c=t(1551),l=t(6390),d=t(2817);function u(e){let{children:a}=e,[t,u]=(0,s.useState)(null);async function m(){try{return await r.R.get("auth/api-keys")}catch(e){return console.error("Failed to fetch API keys:",e),{recaptchaSiteKey:"",cloudinary:{cloudName:"",uploadPreset:""}}}}return((0,s.useEffect)(()=>{async function e(){let e=await m();u(e),sessionStorage.setItem("apiKeys",JSON.stringify(e))}let a=sessionStorage.getItem("apiKeys");a?u(JSON.parse(a)):e()},[]),t)?(0,n.jsx)(i.g,{apiKeys:t,children:(0,n.jsx)(o.Q,{children:(0,n.jsx)(c.D,{children:(0,n.jsx)(l.e,{children:a})})})}):(0,n.jsx)(d.a,{})}},6390:function(e,a,t){"use strict";t.d(a,{O:function(){return d},e:function(){return l}});var n=t(7437),s=t(2265),r=t(6463),i=t(3999);let o={_id:"",email:"",password:"",imgUrls:["https://res.cloudinary.com/djzid7ags/image/upload/v1719433639/vonsaimuwr4b3wrt7keh.avif"],isAdmin:!1},c=(0,s.createContext)(void 0);function l(e){let{children:a}=e,[t,l]=(0,s.useState)(o),[d,u]=(0,s.useState)(!0),m=(0,r.useRouter)(),g=(0,r.usePathname)();return(0,s.useEffect)(()=>{(async function(){u(!0);let e=i.W.getLoggedinUser();if(e&&e._id)try{let a=await i.W.getById(e._id);l(a)}catch(e){console.error("Failed to fetch user details:",e),l(o)}u(!1)})()},[]),(0,s.useEffect)(()=>{!d&&g.startsWith("/admin")&&!t.isAdmin&&m.push("/")},[g,t.isAdmin,m,d]),(0,n.jsx)(c.Provider,{value:{sessionUser:t,isLoading:d,setSessionUser:function(e){e?(l(e),i.W.setLoggedinUser(e)):l(o)},getSessionUser:function(){return t}},children:a})}function d(){let e=(0,s.useContext)(c);if(void 0===e)throw Error("useSession must be used within a SessionProvider");return e}},4769:function(e,a,t){"use strict";t.d(a,{O:function(){return s}});var n=t(2265);function s(e,a){(0,n.useEffect)(()=>{function t(t){e.current&&!e.current.contains(t.target)&&a()}return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[e,a])}},3671:function(e,a,t){"use strict";t.d(a,{H:function(){return r}});var n=t(2265),s=t(6463);function r(){let e=(0,s.useRouter)(),a=(0,s.useSearchParams)(),t=(0,n.useMemo)(()=>a,[a]);return{defaultValues:(0,n.useMemo)(()=>({title:t.get("title")||"",platform:t.get("platform")||"",genre:t.get("genre")||"",isGameJam:t.get("isGameJam")||""}),[t]),updateSearchParams:(0,n.useCallback)(function(a){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=new URLSearchParams(t.toString());Object.entries(a).forEach(e=>{let[a,t]=e;t?s.set(a,t):s.delete(a)});let r=n?"".concat(n,"?").concat(s.toString()):"?".concat(s.toString());e.push(r)},[e,t]),searchParams:t}}},3999:function(e,a,t){"use strict";t.d(a,{W:function(){return i}});var n=t(1635);let s="loggedinUser",r="user/",i={query:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{let a=new URLSearchParams(e).toString();return console.log("Expected request to backend: ".concat(r,"?").concat(a)),n.R.get("".concat(r,"?").concat(a))}catch(e){throw Error(e.message)}},getById:async e=>{try{return n.R.get("".concat(r,"by-id/").concat(e))}catch(e){throw Error(e.message)}},getByEmail:async e=>{try{return n.R.get("".concat(r,"by-email/").concat(e))}catch(e){throw Error(e.message)}},remove:async e=>{try{return n.R.remove("".concat(r,"delete/").concat(e))}catch(e){throw Error(e.message)}},save:async e=>{try{if(e._id)return n.R.put("".concat(r,"update/").concat(e._id),e);return n.R.post(r+"add/",e)}catch(e){throw Error(e.message)}},login:async e=>{try{let a=await n.R.post("auth/login",e);return i.setLoggedinUser(a),a}catch(e){throw Error(e.message)}},signup:async e=>{try{let a=await n.R.post("auth/signup",e);return i.setLoggedinUser(a),a}catch(e){throw Error(e.message)}},logout:async()=>{try{await n.R.post("auth/logout",null),sessionStorage.removeItem(s)}catch(e){throw Error(e.message)}},getLoggedinUser:()=>{let e=sessionStorage.getItem(s);return e?JSON.parse(e):null},setLoggedinUser:e=>{let a={_id:e._id};sessionStorage.setItem(s,JSON.stringify(a))}}},240:function(){}},function(e){e.O(0,[474,648,291,907,148,669,971,23,744],function(){return e(e.s=2564)}),_N_E=e.O()}]);